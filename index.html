<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Meeting Notes Summarizer</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- pdf.js for PDF text extraction -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <!-- mammoth.js for DOCX text extraction -->
    <script src="https://cdn.jsdelivr.net/npm/mammoth@1.6.0/mammoth.browser.min.js"></script>
    <!-- Marked.js for Markdown rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked@4.0.0/marked.min.js"></script>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>AI Meeting Notes Summarizer</h1>
        <p>Upload your meeting transcripts and get AI-powered summaries</p>
      </div>

      <div class="section">
        <h2>ğŸ“ Upload Transcript</h2>
        <div
          class="upload-area"
          onclick="document.getElementById('fileInput').click()"
        >
          <div class="upload-icon">ğŸ“„</div>
          <p>
            <strong>Click to upload</strong> or drag and drop your transcript
            file
          </p>
          <p>Supports: .txt, .docx, .pdf files</p>
        </div>
        <input
          type="file"
          id="fileInput"
          class="file-input"
          accept=".txt,.docx,.pdf"
        />
        <div class="file-info" id="fileInfo">
          <strong>File loaded:</strong> <span id="fileName"></span>
        </div>
      </div>

      <div class="section">
        <h2>âœï¸ Custom Instructions</h2>
        <div class="examples">
          <h4>Example prompts:</h4>
          <ul>
            <li>"Summarize in bullet points for executives"</li>
            <li>"Highlight only action items and deadlines"</li>
            <li>"Focus on technical decisions and next steps"</li>
            <li>"Create a brief summary with key takeaways"</li>
          </ul>
        </div>
        <textarea
          class="prompt-input"
          id="customPrompt"
          placeholder="Enter your custom instructions for the AI summary (e.g., 'Summarize in bullet points for executives' or 'Highlight only action items')"
        >
Summarize this meeting transcript with the following structure:
- Key Discussion Points
- Decisions Made  
- Action Items (with owners if mentioned)
- Next Steps
        </textarea>
      </div>

      <div class="section">
        <button class="btn" id="generateBtn" disabled>
          ğŸ¤– Generate Summary
        </button>
        <div class="loading" id="loading">
          <div class="spinner"></div>
          <p>AI is analyzing your transcript...</p>
        </div>
        <div class="error" id="error"></div>
      </div>

      <div class="section summary-section" id="summarySection">
        <h2>ğŸ“‹ Generated Summary</h2>
        <div class="summary-content">
          <div class="summary-text" id="summaryText"></div>
        </div>
        <button class="btn btn-secondary" id="copyBtn">ğŸ“‹ Copy</button>
        <button class="btn btn-secondary" id="downloadBtn">ğŸ’¾ Download</button>
        <button class="btn btn-secondary" id="editBtn">âœï¸ Edit Summary</button>
        <button class="btn" id="shareBtn">ğŸ“§ Share via Email</button>
        <textarea class="editable-summary" id="editableSummary"></textarea>
        <button class="btn" id="saveEditsBtn" style="display: none">
          ğŸ’¾ Save Changes
        </button>
        <button
          class="btn btn-secondary"
          id="cancelEditsBtn"
          style="display: none"
        >
          âŒ Cancel
        </button>
      </div>

      <div class="email-section" id="emailSection">
        <h3>ğŸ“¬ Share Summary</h3>
        <input
          type="email"
          class="email-input"
          id="recipientEmail"
          placeholder="Enter recipient email address"
        />
        <input
          type="text"
          class="email-input"
          id="emailSubject"
          placeholder="Email subject (optional)"
          value="Meeting Summary"
        />
        <button class="btn" id="sendEmailBtn">Send Email</button>
        <button class="btn btn-secondary" id="cancelEmailBtn">Cancel</button>
        <div class="success" id="emailSuccess"></div>
        <div class="error" id="emailError"></div>
      </div>
    </div>

    <script>
      window.uploadedFile = null;
    </script>
    <script src="config.js"></script>
    <script src="utils.js"></script>
    <script src="upload.js"></script>
    <script src="summary.js"></script>

    <script>
      // Debug script
      document.addEventListener("DOMContentLoaded", function () {
        console.log("DOM loaded");
        console.log("Generate button:", document.getElementById("generateBtn"));
        console.log("Upload area:", document.querySelector(".upload-area"));
        console.log("Summary text:", document.getElementById("summaryText"));

        const btn = document.getElementById("generateBtn");
        if (btn) {
          console.log("Button found, disabled:", btn.disabled);
        } else {
          console.error("Generate button not found!");
        }
      });
    </script>
  </body>
</html>